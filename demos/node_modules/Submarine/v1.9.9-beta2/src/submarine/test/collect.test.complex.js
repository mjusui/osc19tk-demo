'use strict';
const { arrows }=require('cons');
const { Complex }=require('submarine/test/Classes/Collect');



const tests=new Complex();

arrows(tests).arch(
  tests => tests.check().then(
    ret => tests.close().then(
      dummy => ret.map(
        r => Object.assign( r.exams, {
          stats: r.stats,
          complex: r.complex,
        })
      )
    )
  )
).once('Submarine.collect.test', (test, exams)=>{
  exams.forEach((exams)=>{
    const { stats, tests, good, bad, total, ok, complex }=exams;
    test(stats.a === 'a');
    test(stats.b === 'b');
    test(stats.c === 'c');
    test(stats.d == undefined);

    test(tests.a == true);
    test(tests.b == true);
    test(tests.c == true);
    test(tests.d == undefined);

    test(good == 3);
    test(bad == 0);
    test(total == 3);
    test(ok == true);

    test(complex === 'complex');
  });
}, 39);

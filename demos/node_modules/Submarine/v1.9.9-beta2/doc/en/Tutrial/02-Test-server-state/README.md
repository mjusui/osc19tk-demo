# Test server state

You can make sure your server intended to be configured or operating.

```
const Submarine=require('Submarine');

const TestServerState=class extends Submarine {
  query(){
    return {
      which_none: String.raw`
        which none \
          2> /dev/null \
        || exit 0
      `,

      which_node: String.raw`
        which node \
          2> /dev/null \
        || exit 0
      `,
    };
  }

  test(stats){
    return {
      none_is_not_executable: stats.which_none === '',
      node_is_executable: stats.which_node,
    };
  }
 

}


const tests=new TestServerState({
  conn: 'ssh',
  host: 'server1',
});
    


tests.check()
  .then(console.log);
```

Newly introduced should be the `test` interface, actually evaluated at the point of `check().then`. `stats`, the arguments passed to `test` function, is the results of two queries defined in `query` function, each of which are to locate `none` or `node` command path and force exitting successfully even if its executable is not found. And the values of `stats` are verified in `test` function. One verification result is tagged by key of `none_is_not_executable`, Another one is done by `node_is_executable`. They seems to be truthy. `tests.check().then` eventually results in sets having these contents:

1. `stats`: a `query` results (equal to `test` arguments)
2. `tests`: an Object returned by `test` function
3. `good`: count of truthy values ot `tests`
4. `bad`: count of falsy values ot `tests`
5. `total`: count of all values ot `tests`
6. `ok`: `true` if all values of `tests` are truthy, the other is `false`.

`done.result` could be false if one or more falsy values were included in an Object returned by `test` function.




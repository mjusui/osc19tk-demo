'use strict';

module.exports=(preps=[], opt)=>{
  const { Class }=opt;

  return new Class().subs(
    sub => sub.check().then(
      exam => exam.ok
        ? sub.opt.host
        : undefined
    )
  ).then(
    hosts => Array.merge(
      preps,
      ...hosts
    )
  );
};
